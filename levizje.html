<!DOCTYPE html>
<html lang="sq">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulator Avancuar i LÃ«vizjes sÃ« Trupave </title>
<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    color: white;
    text-align: center;
}

h1 {
    margin-top: 20px;
}

.container {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
}

.controls {
    background: rgba(255,255,255,0.1);
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
    width: 340px;
}

.controls input, .controls label {
    width: 100%;
    margin: 5px 0;
}

.controls input {
    padding: 8px;
    border-radius: 8px;
    border: none;
}

button {
    padding: 10px 15px;
    margin: 5px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
}

.start { background: #4CAF50; }
.reset { background: #f44336; }
.optimize { background: #2196F3; }

canvas {
    background: #111;
    border-radius: 10px;
    margin-bottom: 20px;
}

.results, .explanation {
    margin-top: 15px;
    background: rgba(255,255,255,0.1);
    padding: 15px;
    border-radius: 15px;
    width: 340px;
    text-align: left;
}

.chart-container {
    width: 340px;
    margin-top: 20px;
}

.back-btn{
    position:fixed;
    top:20px;
    left:20px;
    width:45px;
    height:45px;
    display:flex;
    align-items:center;
    justify-content:center;
    border-radius:50%;
    background:rgba(255,255,255,0.15);
    backdrop-filter:blur(10px);
    color:white;
    font-size:20px;
    text-decoration:none;
    transition:0.3s;
}

.back-btn:hover{
    background:#00ff88;
    color:black;
}

</style>
</head>
<body>

<h1>ðŸš€ Simulator Avancuar i LÃ«vizjes sÃ« Projektileve</h1>

<div class="container">

<div class="controls">
    <label>ShpejtÃ«sia Fillestare (m/s)</label>
    <input type="number" id="velocity" value="30">

    <label>KÃ«ndi i Hedhjes (gradÃ«)</label>
    <input type="number" id="angle" value="45">

    <label>Graviteti (m/sÂ²)</label>
    <input type="number" id="gravity" value="9.81">

    <label>Koeficienti i RezistencÃ«s sÃ« Ajrit (0-0.1)</label>
    <input type="number" id="air" value="0.02" step="0.01">

    <button class="start" onclick="startSimulation()">Filloni</button>
    <button class="reset" onclick="resetSimulation()">Rivendos</button>
    <button class="optimize" onclick="optimizeAngle()">Optimizoni</button>
</div>

<canvas id="canvas" width="800" height="400"></canvas>

<div class="results" id="results">
    <p>Gjatesia (sipas boshtit horizontal): -</p>
    <p>Lartesia Maksimale (sipas boshtit vertikal): -</p>
    <p>Koha e Fluturimit: -</p>
</div>

<div class="explanation" id="explanation">
    <p><b>Shpjegimi Shkencor:</b></p>
    <p>Ky simulator modelon lÃ«vizjen e projektileve me rezistencÃ« tÃ« mundshme tÃ« ajrit. LÃ«vizja ndjek ligjet e Newton-it:</p>
    <ul>
        <li>Pa rezistencÃ« ajri: lÃ«vizje ideale parabolike</li>
        <li>Me rezistencÃ« ajri: shpejtÃ«sia zvogÃ«lohet pÃ«r shkak tÃ« forcÃ«s sÃ« tÃ«rheqjes (F = -kv)</li>
        
    </ul>
</div>

<a href="index.html" class="back-btn">â¬…</a>


</div>

<script>
// Setup i canvas-it
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

// Setup i grafikut
const chartCanvas = document.getElementById("chartCanvas");
const chartCtx = chartCanvas.getContext("2d");

let animationId;
let dataPoints = [];
let scale = 5;

function startSimulation() {
    cancelAnimationFrame(animationId);
    ctx.clearRect(0,0,canvas.width,canvas.height);
    dataPoints = [];

    let v = parseFloat(document.getElementById("velocity").value);
    let angleDeg = parseFloat(document.getElementById("angle").value);
    let g = parseFloat(document.getElementById("gravity").value);
    let k = parseFloat(document.getElementById("air").value);

    let angle = angleDeg*Math.PI/180;
    let vx = v*Math.cos(angle);
    let vy = v*Math.sin(angle);

    let x=0, y=0, t=0, dt=0.05;

    function animate() {
        ctx.clearRect(0,0,canvas.width,canvas.height);

        // Integrimi Euler pÃ«r rezistencÃ«n e ajrit
        let ax = -k*vx;
        let ay = -g - k*vy;

        vx += ax*dt;
        vy += ay*dt;

        x += vx*dt;
        y += vy*dt;

        if(y>=0) {
            // Vizato pikÃ«n e projektilit
            ctx.beginPath();
            ctx.arc(x*scale, canvas.height - y*scale, 5, 0, Math.PI*2);
            ctx.fillStyle = "#00ffcc";
            ctx.fill();

            dataPoints.push({t: t, y: y});

            t += dt;
            animationId = requestAnimationFrame(animate);
        }

        // Vizato rrugÃ«n e lÃ«vizjes nÃ« kohÃ« reale
        ctx.beginPath();
        ctx.moveTo(0, canvas.height);
        for(let i=0;i<dataPoints.length;i++){
            ctx.lineTo(dataPoints[i].t*scale*vx, canvas.height - dataPoints[i].y*scale);
        }
        ctx.strokeStyle = "#ffcc00";
        ctx.lineWidth = 2;
        ctx.stroke();
    }

    animate();

    // Llogaritje bazike pa rezistencÃ« ajri pÃ«r krahasim
    const range = (v*v*Math.sin(2*angle))/g;
    const maxHeight = (v*v*Math.pow(Math.sin(angle),2))/(2*g);
    const flightTime = (2*v*Math.sin(angle))/g;

    document.getElementById("results").innerHTML = `
        <p>Shkalla: ${range.toFixed(2)} m</p>
        <p>GjatÃ«sia Maksimale: ${maxHeight.toFixed(2)} m</p>
        <p>Koha e Fluturimit: ${flightTime.toFixed(2)} s</p>
        <p>KÃ«ndi Optimal: -</p>
        <p>Eficienca: -</p>
    `;

    // Vizato grafikun
    drawChart(dataPoints);
}

function resetSimulation() {
    cancelAnimationFrame(animationId);
    ctx.clearRect(0,0,canvas.width,canvas.height);
    chartCtx.clearRect(0,0,chartCanvas.width,chartCanvas.height);
    dataPoints=[];
    document.getElementById("results").innerHTML = `
        <p>Shkalla: -</p>
        <p>GjatÃ«sia Maksimale: -</p>
        <p>Koha e Fluturimit: -</p>
        <p>KÃ«ndi Optimal: -</p>
        <p>Eficienca: -</p>
    `;
}

function optimizeAngle() {
    let v = parseFloat(document.getElementById("velocity").value);
    let g = parseFloat(document.getElementById("gravity").value);
    let userAngle = parseFloat(document.getElementById("angle").value);
    let userAngleRad = userAngle * Math.PI / 180;

    let maxRange = 0;
    let bestAngle = 0;

    for(let deg=0;deg<=90;deg+=0.1){
        let rad = deg * Math.PI/180;
        let r = (v*v*Math.sin(2*rad))/g;
        if(r>maxRange){ maxRange=r; bestAngle=deg; }
    }

    const userRange = (v*v*Math.sin(2*userAngleRad))/g;
    const efficiency = (userRange/maxRange)*100;

    document.getElementById("results").innerHTML = `
        <p>Shkalla: ${userRange.toFixed(2)} m</p>
        <p>GjatÃ«sia Maksimale: -</p>
        <p>Koha e Fluturimit: -</p>
        <p>KÃ«ndi Optimal: ${bestAngle.toFixed(2)}Â°</p>
        <p>Eficienca: ${efficiency.toFixed(2)}%</p>
    `;
}

function drawChart(points){
    chartCtx.clearRect(0,0,chartCanvas.width,chartCanvas.height);
    chartCtx.beginPath();
    for(let i=0;i<points.length;i++){
        let px = i*chartCanvas.width/points.length;
        let py = chartCanvas.height - (points[i].y*chartCanvas.height/Math.max(...points.map(p=>p.y)));
        if(i===0) chartCtx.moveTo(px,py);
        else chartCtx.lineTo(px,py);
    }
    chartCtx.strokeStyle="#ff4444";
    chartCtx.lineWidth=2;
    chartCtx.stroke();
}
</script>

</body>
</html>
